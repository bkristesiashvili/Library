@model IEnumerable<UserListViewModel>
@using Library.Common
@using Library.Common.Enums
@using Library.WebApp.Helpers.Extensions
@{
    ViewBag.Title = "მომხმარებლების სია";

    var index = 0;

    Guid.TryParse(User.GetUserId(), out var currentId);
}

<div class="text-13px">
    <div class="row profile-bg text-dark font-weight-bold p-3 rounded-top">
        <div class="col-sm-3 col-md-3">სახელი</div>
        <div class="col-sm-4 col-md-4">გვარი</div>
        <div class="col-sm-3 col-md-3">ელ.ფოსტა</div>
        <div class="col-sm-2 col-md-2">
            <div class="text-right">
                @if (User.IsInRole(GlobalVariables.DefaultRoles[SystemDefaultRoles.SuperAdmin]) || User.IsInRole(GlobalVariables.DefaultRoles[SystemDefaultRoles.Admin]))
                {
                    <a asp-controller="account" asp-action="register" class="btn btn-sm btn-success text-12px"><i class="fas fa-plus">&nbsp;</i>დამატება</a>
                }
            </div>
        </div>
    </div>
    @foreach (var user in Model)
    {
        <div class="row @Html.Raw(index % 2 == 0 ? "grid-header":"") align-middle p-1 text-13px text-left row-hover border @Html.Raw(user.Id == currentId ? "active-user": "")">
            <div class="col-sm-3 col-md-3">@user.FirstName</div>
            <div class="col-sm-4 col-md-4">@user.LastName</div>
            <div class="col-sm-3 col-md-3">@user.Email</div>
            <div class="col-sm-2 col-md-2">
                <div class="row float-right">
                    <div>
                        <button type="button" class="btn btn-sm text-11px text-dark"><i class="fas fa-eye"></i></button>
                    </div>
                    @if (User.IsInRole(GlobalVariables.DefaultRoles[SystemDefaultRoles.SuperAdmin]) || User.IsInRole(GlobalVariables.DefaultRoles[SystemDefaultRoles.Admin]))
                    {
                        <div>
                            <button type="button" class="btn btn-sm text-primary text-11px"><i class="fas fa-edit"></i></button>
                        </div>
                    }

                    @if (User.IsInRole(GlobalVariables.DefaultRoles[SystemDefaultRoles.SuperAdmin]))
                    {
                        <div>
                            <form method="post">
                                <button type="button" onclick="deleteItem('@Url.Action("delete","account")', '@user.Id');" class="btn btn-sm text-11px 
                                        @Html.Raw(user.Id == currentId ? "disabled":"text-danger")" 
                                        @Html.Raw(user.Id == currentId ? "disabled" : "")>
                                    <i class="fas fa-trash"></i>
                                </button>
                            </form>
                        </div>
                    }
                </div>
            </div>
        </div>

        index++;
    }
</div>